## 1 监听器有哪些作用和用法？

Java Web开发中的监听器（listener）就是application、session、request三个对象创建、销毁或者往其中添加修改删除属性时自动执行代码的功能组件，如下所示：

1. ServletContextListener：对Servlet上下文的创建和销毁进行监听。
2. ServletContextAttributeListener：监听Servlet上下文属性的添加、删除和替换。
3. HttpSessionListener：对Session的创建和销毁进行监听。
   - 补充：session的销毁有两种情况：
     - session超时（可以在web.xml中通过`<session- config>/<session-timeout>`标签配置超时时间）；
     - 通过调用session对象的invalidate()方法使session失效。
4. HttpSessionAttributeListener：对Session对象中属性的添加、删除和替换进行监听。
5. ServletRequestListener：对请求对象的初始化和销毁进行监听。
6. ServletRequestAttributeListener：对请求对象属性的添加、删除和替换进行监听。

常见的监听器用途主要包括：网站在线人数技术、监听用户的行为(管理员踢人)。

## 2 过滤器有哪些作用和用法？

Java Web开发中的过滤器（filter）是从Servlet 2.3规范开始增加的功能，并在Servlet 2.4规范中得到增强。

对Web应用来说，过滤器是一个驻留在服务器端的Web组件，它可以截取客户端和服务器之间的请求与响应信息，并对这些信息进行过滤。当Web容器接受到一个对资源的请求时，它将判断是否有过滤器与这个资源相关联。如果有，那么容器将把请求交给过滤器进行处理。在过滤器中，你可以改变请求的内容，或者重新设置请求的报头信息，然后再将请求发送给目标资源。当目标资源对请求作出响应时候，容器同样会将响应先转发给过滤器，再过滤器中， 你可以对响应的内容进行转换，然后再将响应发送到客户端。

常见的过滤器用途主要包括：对用户请求进行统一认证、对用户的访问请求进行记录和审核、对用户发送的数据进行过滤或替换、转换图象格式、对响应内容进行压缩以减少传输量、对请求或响应进行加解密处理、触发资源访问事件、对XML的输出应用XSLT等。

和过滤器相关的接口主要有：Filter、FilterConfig、FilterChain.

## 3 web.xml 的作用？

用于配置Web应用的相关信息，如：监听器（listener）、过滤器（filter）、 Servlet、相关参数、会话超时时间、安全验证方式、错误页面等。

从Servlet 3开始，可以不用在web.xml中部署Servlet（小服务）、Filter（过滤器）、Listener（监听器）等Web组件，Servlet 3提供了基于注解的部署方式，可以分别使用@WebServlet、@WebFilter、@WebListener三个部署小服务、过滤器、监听器。

如果Web提供了有价值的商业信息或者是敏感数据，那么站点的安全性就是必须考虑的问题。安全认证是实现安全性的重要手段，认证就是要解决“Are you who you say you are?”的问题。认证的方式非常多，简单说来可以分为三类：

- What you know? --口令
- What you have? --数字证书（U盾、密保卡）
- Who you are? -- 指纹识别、虹膜识别

在Tomcat中可以通过建立安全套接字层（Secure Socket Layer, SSL）以及通过基本验证或表单验证来实现对安全性的支持。

## 4 Servlet 3中的异步处理指的是什么？

在Servlet 3中引入了一项新的技术可以让Servlet异步处理请求。有人可能会质疑，既然都有多线程了，还需要异步处理请求吗？

答案是肯定的，因为如果一个任务处理时间相当长，那么Servlet或Filter会一直占用着请求处理线程直到任务结束，随着并发用户的增加，容器将会遭遇线程超出的风险，这种情况下很多的请求将会被堆积起来而后续的请求可能会遭遇拒绝服务，直到有资源可以处理请求为止。

异步特性可以帮助应用节省容器中的线程，特别适合执行时间长而且 用户需要得到结果的任务，如果用户不需要得到结果则直接将一个Runnable对象交给Executor（如果不清楚请查看前文关于多线程和线程池的部分）并立即返回即可。

